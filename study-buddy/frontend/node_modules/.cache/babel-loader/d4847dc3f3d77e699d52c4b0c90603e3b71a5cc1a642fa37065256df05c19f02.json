{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import'./StudyGroup.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const StudyGroup=()=>{const[groups,setGroups]=useState([]);const[error,setError]=useState('');const[loading,setLoading]=useState(true);useEffect(()=>{const fetchGroups=async()=>{setLoading(true);const token=localStorage.getItem('token');if(!token){setError('You need to log in to access study groups.');setLoading(false);return;}try{const response=await axios.get('http://localhost:5000/study-group',{headers:{Authorization:`Bearer ${token}`}});// Add showMembers field to each group\nconst groupsWithShowMembers=response.data.study_groups.map(group=>({...group,showMembers:false}));setGroups(groupsWithShowMembers);setError('');// Clear any previous error\n}catch(error){handleError(error);}finally{setLoading(false);}};fetchGroups();},[]);const joinGroup=async groupId=>{const token=localStorage.getItem('token');if(!token){setError('You need to log in to join a group.');return;}try{const response=await axios.post('http://localhost:5000/study-group/join',{groupId},{headers:{Authorization:`Bearer ${token}`}});// Update the members list after joining\nsetGroups(prevGroups=>prevGroups.map(group=>{if(group.id===groupId){return{...group,members:[...group.members,response.data.newMember]};}return group;}));setError('');}catch(error){handleError(error);}};const leaveGroup=async groupId=>{const token=localStorage.getItem('token');if(!token){setError('You need to log in to leave a group.');return;}try{const response=await axios.post('http://localhost:5000/study-group/leave',{groupId},{headers:{Authorization:`Bearer ${token}`}});// Update the members list after leaving\nsetGroups(prevGroups=>prevGroups.map(group=>{if(group.id===groupId){return{...group,members:response.data.members};}return group;}));setError('');}catch(error){handleError(error);}};const toggleMembers=groupId=>{setGroups(prevGroups=>prevGroups.map(group=>{if(group.id===groupId){return{...group,showMembers:!group.showMembers};}return group;}));};const handleError=error=>{if(error.response){console.error('Error:',error.response.data);setError(error.response.data.message||'An error occurred.');}else{console.error('Error:',error.message);setError('An error occurred.');}};if(loading){return/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Your Study Groups\"}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:error}),groups.length>0?/*#__PURE__*/_jsx(\"ul\",{children:groups.map(group=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:group.name}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>joinGroup(group.id),children:\"Join Group\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>leaveGroup(group.id),children:\"Leave Group\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>toggleMembers(group.id),children:group.showMembers?'Hide Members':'Show Members'}),group.showMembers&&group.members&&group.members.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Members:\"}),/*#__PURE__*/_jsx(\"ul\",{children:group.members.map(member=>/*#__PURE__*/_jsx(\"li\",{children:member.username},member.id))})]})]},group.id))}):/*#__PURE__*/_jsx(\"p\",{children:\"No study groups found.\"})]});};export default StudyGroup;","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","StudyGroup","groups","setGroups","error","setError","loading","setLoading","fetchGroups","token","localStorage","getItem","response","get","headers","Authorization","groupsWithShowMembers","data","study_groups","map","group","showMembers","handleError","joinGroup","groupId","post","prevGroups","id","members","newMember","leaveGroup","toggleMembers","console","message","children","style","color","length","name","onClick","member","username"],"sources":["/home/chemelil/study-buddy/study-buddy/frontend/src/components/StudyGroup.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport './StudyGroup.css';\n\nconst StudyGroup = () => {\n    const [groups, setGroups] = useState([]);\n    const [error, setError] = useState('');\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        const fetchGroups = async () => {\n            setLoading(true);\n            const token = localStorage.getItem('token');\n            if (!token) {\n                setError('You need to log in to access study groups.');\n                setLoading(false);\n                return;\n            }\n\n            try {\n                const response = await axios.get('http://localhost:5000/study-group', {\n                    headers: { Authorization: `Bearer ${token}` }\n                });\n                \n                // Add showMembers field to each group\n                const groupsWithShowMembers = response.data.study_groups.map(group => ({\n                    ...group,\n                    showMembers: false,\n                }));\n                setGroups(groupsWithShowMembers);\n                setError(''); // Clear any previous error\n            } catch (error) {\n                handleError(error);\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        fetchGroups();\n    }, []);\n\n    const joinGroup = async (groupId) => {\n        const token = localStorage.getItem('token');\n        if (!token) {\n            setError('You need to log in to join a group.');\n            return;\n        }\n\n        try {\n            const response = await axios.post('http://localhost:5000/study-group/join', { groupId }, {\n                headers: { Authorization: `Bearer ${token}` }\n            });\n            \n            // Update the members list after joining\n            setGroups((prevGroups) =>\n                prevGroups.map((group) => {\n                    if (group.id === groupId) {\n                        return { ...group, members: [...group.members, response.data.newMember] };\n                    }\n                    return group;\n                })\n            );\n            setError('');\n        } catch (error) {\n            handleError(error);\n        }\n    };\n\n    const leaveGroup = async (groupId) => {\n        const token = localStorage.getItem('token');\n        if (!token) {\n            setError('You need to log in to leave a group.');\n            return;\n        }\n\n        try {\n            const response = await axios.post('http://localhost:5000/study-group/leave', \n            { groupId }, \n            {\n                headers: { Authorization: `Bearer ${token}` }\n            });\n    \n            // Update the members list after leaving\n            setGroups((prevGroups) =>\n                prevGroups.map((group) => {\n                    if (group.id === groupId) {\n                        return { ...group, members: response.data.members };\n                    }\n                    return group;\n                })\n            );\n            setError('');\n        } catch (error) {\n            handleError(error);\n        }\n    };\n\n    const toggleMembers = (groupId) => {\n        setGroups((prevGroups) =>\n            prevGroups.map((group) => {\n                if (group.id === groupId) {\n                    return { ...group, showMembers: !group.showMembers };\n                }\n                return group;\n            })\n        );\n    };\n\n    const handleError = (error) => {\n        if (error.response) {\n            console.error('Error:', error.response.data);\n            setError(error.response.data.message || 'An error occurred.');\n        } else {\n            console.error('Error:', error.message);\n            setError('An error occurred.');\n        }\n    };\n\n    if (loading) {\n        return <p>Loading...</p>;\n    }\n\n    return (\n        <div>\n            <h2>Your Study Groups</h2>\n            {error && <p style={{ color: 'red' }}>{error}</p>}\n            {groups.length > 0 ? (\n                <ul>\n                    {groups.map((group) => (\n                        <li key={group.id}>\n                            <h3>{group.name}</h3>\n                            <button onClick={() => joinGroup(group.id)}>Join Group</button>\n                            <button onClick={() => leaveGroup(group.id)}>Leave Group</button>\n                            <button onClick={() => toggleMembers(group.id)}>\n                                {group.showMembers ? 'Hide Members' : 'Show Members'}\n                            </button>\n                            {group.showMembers && group.members && group.members.length > 0 && (\n                                <div>\n                                    <h4>Members:</h4>\n                                    <ul>\n                                        {group.members.map((member) => (\n                                            <li key={member.id}>{member.username}</li>\n                                        ))}\n                                    </ul>\n                                </div>\n                            )}\n                        </li>\n                    ))}\n                </ul>\n            ) : (\n                <p>No study groups found.</p>\n            )}\n        </div>\n    );\n};\n\nexport default StudyGroup;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}